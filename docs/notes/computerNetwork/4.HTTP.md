---
title: HTTP
createTime: 2025/02/12 20:05:45
permalink: /computerNetwork/th2r3y8e/
---
## 1 http的特点

1. http是由浏览器通过url向web服务器发送请求，再通过web服务器向客户端发送响应信息。

2. 简单。客户端向服务端发送请求时，只需要发送请求方法和路径。

3. http允许传输任意类型的数据对象。

4. 无连接。限制每次连接处理一个请求。处理完客户端的请求之后断开连接。长连接。http1.1之后用keep-alive。

## 2 浏览器输入url

在浏览器地址输入url，按下回车之后经历的流程

1. 浏览器会根据url逐层查询DNS服务器缓存，解析url中的域名所对应的IP地址，DNS缓存从近到远依次是浏览器缓存，系统缓存，路由器缓存，IPS服务器缓存和域名服务器缓存，顶级域名服务器缓存，从哪个缓存找到对应的IP则直接返回。
2. 找到IP地址之后，根据IP地址和对应端口与服务器建立TCP连接（三次握手）
3. 连接建立之后，浏览器会发出读取文件的http请求，该请求将发送给服务器。
4. 服务器处理请求做出响应，并把带有html文本的http响应报文发送给浏览器。
5. 浏览器收到html，并在窗口渲染。
6. 浏览器释放TCP连接（TCP四次挥手）

## 3 状态码

1XX：指示信息--表示请求已接收，继续处理

2XX：成功

3XX：重定向--要完成请求，必须进行更进一步的操作。（往往和跳转相关）

4XX：客户端错误

5XX：服务端错误

具体来看：

​	400：客户端请求有语法错误。

​	401：客户端没有权限去请求某些资源。

​	403：服务器收到请求，但是拒绝提供服务。比如IP地址被拉黑了。

​	404：请求的资源不存在，可能是url写错了。

​	500：服务器内部报错。

​	503：服务器当前不能处理客户端请求，过段时间可能恢复正常。有可能是服务器的连接池打满了，这时候就不能再对外提供服务。

## 4 GET和POST

Http报文层面：GET请求信息在url上，POST请求信息在报文体中。个别浏览器对url长度限制。

数据库层面：GET符合幂等性和安全性。POST不符合。

​	幂等性：对数据库的一次操作和多次操作获得结果一致。

​	安全性：没有改变数据库中的数据。

​	其他层面：GET请求可以被缓存，被存储。会被浏览器存在浏览记录中。POST不行。

## 5 Cookie和Session

Http是无状态的，也就是说，如果有登录需求的页面，需要登一次输入一次。很烦。这时候就引入一些机制，让Http具备状态，Cookie和Session就是解决这个的。

### Cookie是客户端的解决方案

1. 当用户使用浏览器访问一个支持cookie的网站时，**客户端**会提供包括用户名在内的个人信息**提交至服务器**。
2. **服务器再向客户端回传**相应的超文本的同时，也会发回这些个人信息，这些信息存放在http响应头里。
3. 当**客户端接收到服务器的响应**之后，浏览器会将这些信息存放在一个统一的位置。
4. **客户端再次请求**的时候，会把Cookie放在请求头回发。
5. **服务器接收到之后**，分析存放在请求头的Cookie，得到客户端特有的信息，从而动态生成与客户端对应的信息。

### Session是服务器端的解决方案

1. 服务器使用了一种类似三维表的结构保存信息。
2. 当程序需要为某个客户端请求创建session时，服务器首先检查这个客户端的请求里**是否已包含了session标识**(session id)。
3. 如果已包含：说明以前已经为此客户端创建过session，服务器就按照session id把这个session检索出来使用，检索不到就新建一个。
4. 如果不包含：则为此客户端创建一个session，并且生成一个与此session相关的session id，并回发给客户端进行保存。

### Session实现方式

1. 使用cookie实现：服务器给每个session分配一个唯一的gsessionid，并通过cookie发送给客户端。当客户端发送新请求的时候，将在cookie头中携带gsessionid，这样子服务器就能找到对应的gsessionid。
2. 使用URL回写来实现：服务器发送给浏览器页面的所有链接中，都携带gsessionid的参数，这样客户端点击任意一个链接，都会将参数带回服务器。如果直接在浏览器输入，那session匹配不到。

> **Tomcat对session的实现**是同时使用cookie和URL。如果客户端支持cookie，那就停用URL。如果cookie被禁用，就一直用URL。

## 6 Cookie和Session的区别

1. Cookie数据存放在客户的浏览器上，Session数据存放在服务器上
2. Session比Cookie安全
3. 若考虑减轻服务器负担，应当使用Cookie

